\begin{figure}[htp]
\centering
{
	\begin{tikzpicture}
		\newcommand\XA{0}
		\newcommand\YA{0}
		\node (x)		[treenode, fill=black!20] 	at (-6,0)       {$U$ \\ 50};
		\node (a)		[subtree] 									at (-7.5,-1)  	{\Large $\alpha$};
		\node (y0)	[treenode] 									at (-4,-1.5) 		{$V$ \\ 100};
		\node (y1)	[treenode]									at (-5.5,-3)		{$W$ \\ 60}; 
		\node (b)		[subtree] 									at (-3,-2.5)    {\Large $\beta$};
		\node (y2)	[treenode]									at (-7,-4.5)		{$X$ \\ 55}; 
		\node (g)		[subtree] 									at (-4,-4)   		{\Large $\gamma$};
		\node (gnd)	[ground] 										at (-8.5,-6)		{}; 
		\node (o)		[subtree] 									at (-5.5,-5.5)  {\Large $\omega$};
		\node (x1) 	[rectangle,align=center,minimum size=1cm] at (-7.25,0) 	{\large target \\ \large node};
		\node (y1l) [rectangle,align=center,minimum size=1cm] at (-7.5,-3) 		{\large successor node's \\ \large parent};
		\node (y2l) [rectangle,align=center,minimum size=1cm] at(-8.5,-4.5) 	{\large successor \\ \large node};

		\path[every node/.style={font=\sffamily\large}]
		(-6, 1) edge[->] 								node 					{} (x)
		(x) 		edge[->,dotted,thick] 	node 					{} (y0)
		(x) 		edge[->]								node 					{} (a.north)
		(y0) 		edge[->] 								node 					{} (y1)
		(y0) 		edge[->] 								node 					{} (b.north)
		(y1) 		edge[->,dotted,thick] 	node 					{} (y2)
		(y1) 		edge[->] 								node 					{} (g.north)
		(y2) 		edge[->,dotted,thick]		node 					{} (gnd)
		(y2) 		edge[->,dotted,thick]		node 					{} (o.north);

		\path[every node/.style={font=\sffamily\small}]
		(-3.25, 0) edge[->,semithick, double] node [above, outer sep=3pt] {\large \texttt delete 50} (-0.75, 0);

		\node (ix)	[treenode] 									at (1,0)       	{$U$ \\ 55};
		\node (ia)	[subtree] 									at (-0.5,-1)  		{\Large $\alpha$};
		\node (iy0)	[treenode] 									at (3,-1.5) 		{$V$ \\ 100};
		\node (iy1)	[treenode]									at (1.5,-3)			{$W$ \\ 60}; 
		\node (ib)	[subtree] 									at (4,-2.5)    	{\Large $\beta$};
		\node (io)	[subtree]										at (0,-4)				{\Large $\omega$}; 
		\node (ignd)[subtree] 									at (3,-4)   		{\Large $\gamma$};

		\path[every node/.style={font=\sffamily\small}]
		(1, 1) 	edge[->] 								node 					{} (ix)
		(ix) 		edge[->] 								node 					{} (iy0)
		(ix) 		edge[->] 								node 					{} (ia.north)
		(iy0) 	edge[->] 								node 					{} (iy1)
		(iy0) 	edge[->] 								node 					{} (ib.north)
		(iy1) 	edge[->] 								node 					{} (io.north)
		(iy1) 	edge[->] 								node 					{} (ignd.north);

		%% legend
		\draw[->] (0,-5.9) -- (1,-5.9) node[right] {\large ~free edge};
		\draw[->,dotted,thick] (0,-6.4) -- (1,-6.4) node[right] {\large ~locked edge};
		\node [thin, draw=black, align=center, minimum width=5cm, minimum height=1.25cm] at (2,-6.15) {};	
		%\draw[->] (-3.5, -5.8) -- (-2.5, -5.8) node[right] {\large ~clean edge};
		%\draw[->,dotted,thick] (0.5, -5.8) -- (1.5, -5.8) node[right] {\large ~locked edge};
		%\draw[->,dashed,thick] (-3.5, -6.3) -- (-2.5, -6.3) node[right] {\large ~promote flag set};
		%\node [thin, draw=black, align=center, minimum width=8.1cm, minimum height=1.25cm] at (0.5, -6.1) {};
	\end{tikzpicture}
}
\caption[\CASTLE{} - An illustration of a complex delete operation]{An illustration of a complex delete operation}
\label{fig:castle-complex}
\end{figure}